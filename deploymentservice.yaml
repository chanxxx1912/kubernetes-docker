apiVersion: apps/v1

kind: Deployment

metadata:

  name: docker-deployment
  labels: 
  app: docker-deployment 

spec:
  replicas: 1
  strategy:
  type: RollingUpdate
  rollingUpdate:
   maxSurge: 3
   maxUnavailable: 1
   imeoutSeconds: 100
   updatePeriodSeconds: 5

selector:

 matchLabels:

  app: docker-deployment
                        
 template:

  metadata:

   labels:

    app: docker-deployment

 spec:

  containers:

  - name: docker-deployment

    image: chanxxx1999/docker-spring-boot

    ports:

     - containerPort: 8090

---

apiVersion: v1

kind: Service

metadata:

  name: docker-deployment

spec:

  type: NodePort

  selector:

    app: docker-deployment

  ports:

  - protocol: TCP

    port: 80

    targetPort: 8090
